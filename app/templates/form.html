{% extends "base.html" %}
{% block title %}Formulário FURIOSO{% endblock %}

{% block content %}
<h1>Cadastro do Fã</h1>
    <form action="/submit" method="post" enctype="multipart/form-data">

        {% if error %}
        <div class="error">
            {{ error }}
        </div>
        {% endif %}
        <label>Nome completo:</label><br>
        <input type="text" name="nome"><br><br>

        <label>Idade:</label><br>
        <input type="text" maxlength="3" name="idade" required><br><br>

        <label for="cpf">CPF:</label><br>
        <input type="text" name="cpf" maxlength="14" oninput="formatarCPF(this)"><br><br>

        <label>Endereço:</label><br>
        <input type="text" name="endereco" maxlength="200"><br><br>

        <label>Email:</label><br>
        <input type="email" name="email" maxlength="120"><br><br>

        <label>Interesses em e-sports:</label><br>
        <textarea name="interesses" rows="4" cols="50"></textarea><br><br>

        <label>Eventos de e-sports que participou no último ano:</label><br>
        <textarea name="eventos" rows="4" cols="50"></textarea><br><br>

        <label>Produtos/compras da FURIA no último ano:</label><br>
        <textarea name="compras" rows="4" cols="50"></textarea><br><br>

        <label>Redes sociais (links):</label><br>
        <input type="url" name="twitter" placeholder="Twitter"><br>
        <input type="url" name="instagram" placeholder="Instagram"><br>
        <input type="url" name="outra_rede" placeholder="Outras redes"><br><br>

        <label>Link de perfil em site de e-sports:</label><br>
        <input type="url" name="perfil_esports"><br><br>

        <label>Upload de documento (imagem do RG/CPF):</label><br>
        <input type="file" name="documento" accept="image/*,application/pdf"><br><br>

        <button type="submit">Enviar</button>
    </form>
    <script>
        function formatarCPF(input) {
            let valor = input.value.replace(/\D/g, ''); // Remove tudo que não for número
            if (valor.length <= 11) {
                // Adiciona a formatação no CPF
                valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                valor = valor.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            }
            input.value = valor; // Atualiza o campo com o valor formatado
        }
    </script>
{% endblock %}